(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{620:function(e,t,n){"use strict";n.r(t);var r=n(17),o=(n(61),n(27),n(82),n(67),n(4),n(49),n(172)),c=n(263),d=n(271),l={middleware:"auth",components:{WeekDayWorkCard:n(266).default,textEditor:o.default,cardComponent:c.default,contentPreview:d.default},data:function(){return{cardBtns:[{text:"Изменить",action:"updateData",key:"text",color:"orange"}],data:[],activeKey:null,content:"",phones:[],worktime:[],newItemWD:{}}},computed:{watchId:function(){return this.phones.map((function(e){return e.id?e.id:void 0}))}},mounted:function(){this.getData(),this.getAllPhones(),this.getWorkTime()},methods:{getWorkTime:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/administrate/get/worktime/?limit=9999");case 2:data=t.sent,e.worktime=data.data.results,console.log(e.worktime);case 5:case"end":return t.stop()}}),t)})))()},delWorkDay:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(confirm("Вы уверены?")){n.next=2;break}return n.abrupt("return");case 2:return r=t.worktime.findIndex((function(t){return t.id===e.id})),n.next=5,t.$axios.delete("/administrate/get/worktime/".concat(e.id));case 5:n.sent,t.worktime.splice(r,1);case 7:case"end":return n.stop()}}),n)})))()},saveWorkTime:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,link,data,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="post",o=!1,link="",e.id&&(r="put",o=!0,link="".concat(e.id,"/")),n.next=6,t.$axios[r]("/administrate/get/worktime/".concat(link),e);case 6:data=n.sent,o?(c=t.worktime.findIndex((function(e){return e.id===data.data.id})),t.worktime[c]=data.data):t.worktime.push(data.data),t.newItemWD={};case 9:case"end":return n.stop()}}),n)})))()},addPhone:function(){this.phones.push({phone_number:""})},savePhone:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.post("/users/phones/",t.phones[e]);case 2:data=n.sent,t.phones[e]=data.data,t.phones.push({}),t.phones.splice(t.phones.length,1);case 6:case"end":return n.stop()}}),n)})))()},getAllPhones:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/users/phones/?limit=9999");case 2:data=t.sent,e.phones=data.data.results;case 4:case"end":return t.stop()}}),t)})))()},deletePhone:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(confirm("Вы уверены что хотите удлаить номер?")){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.$axios.delete("/users/phones/".concat(t.phones[e].id));case 4:n.sent,t.phones.splice(e,1);case 6:case"end":return n.stop()}}),n)})))()},getData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return data={},t.prev=1,t.next=4,e.$axios.get("/admin/pages/pages/1");case 4:data=t.sent,t.next=17;break;case 7:return t.prev=7,t.t0=t.catch(1),t.t1=console,t.next=12,e.$axios.post("/admin/pages/pages/",{title:"First Start",h1:"First Start",h5:"First Start",bg_color:"#000000",title_block:"First Start",description:"First Start"});case 12:return t.t2=t.sent,t.t1.log.call(t.t1,t.t2),t.next=16,e.$axios.get("/admin/pages/pages/1");case 16:data=t.sent;case 17:console.log(data),e.data=[data.data];case 19:case"end":return t.stop()}}),t,null,[[1,7]])})))()},setData:function(data,e){this.content=data,this.activeKey=e},updateImg:function(form){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return form.append("title",e.data[0].title),form.append("h1",e.data[0].h1),form.append("h5",e.data[0].h5),form.append("title_block",e.data[0].title_block),form.append("description",e.data[0].description),t.next=7,e.$axios.put("/admin/pages/pages/1/",form);case 7:t.sent;case 8:case"end":return t.stop()}}),t)})))()},updateData:function(data){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.activeKey),e.data[0][e.activeKey]=data,t.prev=2,delete e.data[0].img,t.next=6,e.$axios.put("/admin/pages/pages/1/",e.data[0]);case 6:t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),alert(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()}}},m=n(20),v=n(26),h=n.n(v),f=n(162),w=n(590),x=n(131),k=n(589),_=n(60),component=Object(m.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-row",[n("section",{staticClass:"container"},[n("client-only",[n("text-editor",{attrs:{content:e.content},on:{updateText:e.updateData,"update:content":function(t){e.content=t}}})],1)],1)]),e._v(" "),n("hr",{staticStyle:{"margin-top":"1%"},attrs:{height:"80"}}),e._v(" "),e._l(e.data,(function(i){return n("div",{key:i.id},[n("v-row",[n("v-col",[n("card-component",{attrs:{title:"Название",inObj:"title",text:i.title,btns:e.cardBtns},on:{updateData:e.setData,"update:text":function(t){return e.$set(i,"title",t)}}})],1),e._v(" "),n("v-col",[n("card-component",{attrs:{title:"H1 текст",inObj:"h1",text:i.h1,btns:e.cardBtns},on:{updateData:e.setData,"update:text":function(t){return e.$set(i,"h1",t)}}})],1)],1),e._v(" "),n("v-row",[n("v-col",[n("card-component",{attrs:{title:"H5 текст",inObj:"h5",text:i.h5,btns:e.cardBtns},on:{updateData:e.setData,"update:text":function(t){return e.$set(i,"h5",t)}}})],1)],1),e._v(" "),n("v-row",[n("v-btn",{on:{click:e.addPhone}},[n("v-icon",[e._v("mdi-plus")])],1),e._v(" "),e._l(e.phones,(function(t,r){return n("div",{key:r},[n("v-col",[n("v-text-field",{attrs:{label:"телефон"},model:{value:t.phone_number,callback:function(n){e.$set(t,"phone_number",n)},expression:"phone.phone_number"}})],1),e._v(" "),n("v-col",[n("v-text-field",{attrs:{label:"оператор"},model:{value:t.operator,callback:function(n){e.$set(t,"operator",n)},expression:"phone.operator"}})],1),e._v(" "),n("v-col",[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.id,expression:"phone.id"}],on:{click:function(t){return e.deletePhone(r)}}},[n("v-icon",[e._v("mdi-delete")])],1),e._v(" "),n("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.phones[r].id,expression:"!phones[k].id"}],on:{click:function(t){return e.savePhone(r)}}},[n("v-icon",[e._v("mdi-content-save")])],1)],1)],1)}))],2),e._v(" "),n("v-row",[n("contentPreview",{attrs:{action:"updateData",title:i.title_block,text:i.description,img:i.img},on:{updateImg:e.updateImg,updateData:e.setData,"update:title":function(t){return e.$set(i,"title_block",t)},"update:text":function(t){return e.$set(i,"description",t)}}})],1),e._v(" "),n("v-row",[e._l(e.worktime,(function(i,t){return n("week-day-work-card",{key:t,attrs:{item:i},on:{deleteItem:e.delWorkDay,saveItem:e.saveWorkTime,"update:item":function(e){i=e}}})})),e._v(" "),n("week-day-work-card",{attrs:{item:e.newItemWD},on:{deleteItem:e.delWorkDay,saveItem:e.saveWorkTime,"update:item":function(t){e.newItemWD=t}}})],2)],1)}))],2)}),[],!1,null,null,null);t.default=component.exports;h()(component,{TextEditor:n(172).default,CardComponent:n(263).default,WeekDayWorkCard:n(266).default}),h()(component,{VBtn:f.a,VCol:w.a,VIcon:x.a,VRow:k.a,VTextField:_.a})}}]);