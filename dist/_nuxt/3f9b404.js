(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{608:function(t,e,n){"use strict";n.r(e);var r=n(17),o=(n(60),n(29),n(91),{name:"tags",data:function(){return{dialog:!1,tag:{name:"",id:null},tags:[],lastVal:""}},methods:{updTag:function(t){this.lastVal=t.name,this.tag=t,this.dialog=!0},otmena:function(){this.tag.name=this.lastVal,this.tag={name:"",id:null},this.dialog=!1},addTag:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.tag.name.length<2)){e.next=3;break}return alert("Длинна должна быть больше 3 символов "+t.tag.name.length),e.abrupt("return");case 3:if(null!==t.tag.id){e.next=10;break}return e.next=6,t.$axios.post("/mounters/tags/",t.tag);case 6:data=e.sent,t.tags.push(data.data),e.next=13;break;case 10:return e.next=12,t.$axios.patch("/mounters/tags/".concat(t.tag.id,"/"),t.tag);case 12:e.sent;case 13:t.tag={name:"",id:null},t.dialog=!1;case 15:case"end":return e.stop()}}),e)})))()},getAllTags:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/mounters/tags/?limit=9999999");case 2:data=e.sent,console.log(data),t.tags=data.data.results;case 5:case"end":return e.stop()}}),e)})))()},deleteTag:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$axios.delete("/mounters/tags/".concat(t.id,"/"));case 2:n.sent,(r=e.tags.indexOf(t))>-1&&e.tags.splice(r,1);case 5:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.getAllTags()}}),c=n(19),l=n(23),d=n.n(l),v=n(157),m=n(240),f=n(9),_=n(571),h=n(575),x=n(570),k=n(48),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",{staticStyle:{"margin-bottom":"5%","margin-top":"2%"}},[n("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"blue lighten-2",dark:""}},"v-btn",o,!1),r),[t._v("\n          Добавить\n        ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n("v-card",[n("v-card-title",[t._v("Добавление тега")]),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Название"},model:{value:t.tag.name,callback:function(e){t.$set(t.tag,"name",e)},expression:"tag.name"}})],1),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"orange lighten-3"},on:{click:t.otmena}},[t._v("Отмена")]),t._v(" "),n("v-btn",{attrs:{color:"green lighten-3"},on:{click:t.addTag}},[t._v("сохранить")])],1)],1)],1)],1),t._v(" "),n("v-row",t._l(t.tags,(function(e,r){return n("v-col",{key:r,attrs:{cols:"3"}},[n("v-card",{attrs:{elevation:"9"}},[n("v-card-title",[t._v(t._s(e.name))]),t._v(" "),n("v-card-text",[t._v(t._s(e.count)+" - количество пользователей у тега\n  ")]),t._v(" "),n("v-card-subtitle",[t._v(t._s(new Date(e.date_add).toLocaleString("ru")))]),t._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"red lighten-3"},on:{click:function(n){return t.deleteTag(e)}}},[t._v("del")]),t._v(" "),n("v-btn",{attrs:{color:"blue lighten-3"},on:{click:function(n){return t.updTag(e)}}},[t._v("upd")])],1)],1)],1)})),1)],1)}),[],!1,null,"59e3b100",null);e.default=component.exports;d()(component,{VBtn:v.a,VCard:m.a,VCardActions:f.a,VCardSubtitle:f.b,VCardText:f.c,VCardTitle:f.d,VCol:_.a,VDialog:h.a,VRow:x.a,VTextField:k.a})}}]);